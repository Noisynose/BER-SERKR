{% extends 'hamask/base.html' %}

{% block content %}
<div class="container">
<div class="row page-header">
<div class="col-sm-12">    
    <div class="d-flex justify-content-between">
    <div class="p2">
        <h2>Stats</h2>
    </div>
    <div class="p-2">
        <a href="{% url 'hamask:stat_create' %}" class="head btn btn-success"><i class="fa fa-plus"></i>&nbsp;Add</a>
    </div>
    </div>
</div>
</div>


<!-- Maxes & PRs -->
<div class="row">
    <!-- PRs -->
    <div class="col-sm-12 col-md-6">
        <h5>Your last PRs</h5>
        {% if prs %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Exercise</th>
                        <th>Weight</th>
                        <th>Reps</th>
                    </tr>
                </thead>
                
                <tbody>
                {% for pr in prs %}
                    <tr>
                      <td><a href="{% url 'hamask:stat_update' pr.id %}">{{ pr.entry_date }}</a></td>
                      <td>{{ pr.exercise }}</td>
                      <td>{{ pr.weight }}</td>
                      <td>{{ pr.reps }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="">
                <p>No PRs</p>
            </div>
        {% endif %}
    </div>
    
    <!-- Maxes -->
    <div class="col-sm-12 col-md-6">
        <h5>Your maxes</h5>
        {% if maxes %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Exercise</th>
                        <th>Weight</th>
                        <th>Date</th>
                    </tr>
                </thead>
                
                <tbody>
                {% for max in maxes %}
                    <tr>
                      <td>{{ max.exercise }}</td>
                      <td>{{ max.weight }}</td>
                      <td>{{ max.entry_date }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="">
                <p>No maxes</p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Full stats -->
{% if stats %}
    <div class="row">
        <div class="col-sm-12">
            <a id="btn-full-stats" href="#" class="btn btn-primary"><i class="fa fa-bars"></i>&nbsp;SHOW ALL STATS</a>
            <br/>&nbsp;
            <div id="full-stats" style="display: none;">
            <div class="panel panel-default">
                <div class="panel-heading"><h5>All stats</h5></div>
                
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Exercise</th>
                            <th>Weight</th>
                            <th>Reps</th>
                        </tr>
                    </thead>
                    
                    <tbody>
                    {% for stat in stats %}
                        <tr>
                          <td><a href="{% url 'hamask:stat_update' stat.id %}">{{ stat.entry_date }}</a></td>
                          <td>{{ stat.exercise }}</td>
                          <td>{{ stat.weight }}</td>
                          <td>{{ stat.reps }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            </div>
        </div>
    </div>
{% endif %}
</div>

<!-- Custom JS -->
<script type="text/javascript">
    $('#btn-full-stats').on('click', function () {
        $('#full-stats').slideToggle();
    });
</script>
{% endblock %}